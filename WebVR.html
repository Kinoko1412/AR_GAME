<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>VR Video View</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <style>
        html, body {
            height: 100%;
            margin: 0;
        }
    </style>
</head>
<body>
    <a-scene>
        <a-assets>
            <video id="video" autoplay loop crossorigin="anonymous"></video>
        </a-assets>

        <!-- 調整球面的scale使其足夠大 -->
        <a-videosphere src="#video" scale="2 2 2"></a-videosphere>

        <!-- 設定攝像頭限制俯仰角度 -->
        <a-camera position="0 1.6 0" look-controls="true" wasd-controls-enabled="false">
            <a-animation attribute="rotation"
                dur="10"
                fill="forwards"
                to="0 0 0"
                repeat="indefinite"></a-animation>
        </a-camera>
    </a-scene>

    <script>
        // 使用WebRTC獲取裝置後鏡頭視頻流
        navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } })
            .then(function(stream) {
                // 將視頻流設定為video元素的來源
                var video = document.getElementById('video');
                video.srcObject = stream;
            })
            .catch(function(error) {
                console.error("Cannot access camera: ", error);
            });
    </script>
</body>
</html>
