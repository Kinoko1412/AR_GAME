<!DOCTYPE html>
<html>
<head>
  <title>AR VR</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
</head>
<body>
  <a-scene vr-mode-ui="enabled: false">
    <a-entity camera></a-entity>
    <a-video id="video" src="" play></a-video>
  </a-scene>

  <script>
    // Get the video element
    var video = document.getElementById('video');

    // Ask for permission to use the camera
    navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } })
      .then(function(stream) {
        video.srcObject = stream;
        video.play();
      })
      .catch(function(error) {
        console.error('Failed to get user media', error);
      });

    // Set the video as the material for the video sphere
    video.addEventListener('playing', function() {
      var videoTexture = new THREE.VideoTexture(video);
      videoTexture.minFilter = THREE.LinearFilter;
      videoTexture.magFilter = THREE.LinearFilter;
      var material = new THREE.MeshBasicMaterial({ map: videoTexture });
      var sphere = document.querySelector('a-video').getObject3D('mesh');
      sphere.material = material;
    });
  </script>
</body>
</html>
